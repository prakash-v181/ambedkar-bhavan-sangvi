<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Ambedkar Bhavan Sangvi – Photo Gallery</title>

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

  <style>
    /* ================= GLOBAL ================= */
    body {
      font-family: 'Segoe UI', system-ui, sans-serif;
      margin: 0;
      background:
        radial-gradient(circle at top left, #e3f2ff, transparent 40%),
        radial-gradient(circle at bottom right, #dbeafe, transparent 40%),
        linear-gradient(135deg, #eef5ff, #ffffff);
      min-height: 100vh;
    }

    h1 {
      font-weight: 700;
      color: #0b3c91;
    }

    /* ================= TOP LINKS ================= */
    .top-links a {
      text-decoration: none;
      color: #0b3c91;
      font-weight: 600;
      margin-right: 18px;
    }

    .top-links a:hover {
      text-decoration: underline;
    }

    /* ================= UPLOAD CARD ================= */
    .upload-card {
      background: linear-gradient(145deg, #ffffff, #eef5ff);
      padding: 28px;
      border-radius: 20px;
      box-shadow:
        0 25px 45px rgba(11,60,145,0.15),
        inset 0 1px 0 rgba(255,255,255,0.9);
      max-width: 520px;
      margin: auto;
    }

    /* ================= GALLERY CARD (3D) ================= */
    .gallery-card {
      position: relative;
      border-radius: 20px;
      background: rgba(255,255,255,0.85);
      backdrop-filter: blur(10px);
      box-shadow:
        0 20px 40px rgba(11,60,145,0.18),
        inset 0 1px 0 rgba(255,255,255,0.8);
      overflow: hidden;
      transform-style: preserve-3d;
      transition: transform 0.35s ease, box-shadow 0.35s ease;
    }

    .gallery-card:hover {
      transform: translateY(-10px) rotateX(3deg);
      box-shadow:
        0 35px 70px rgba(11,60,145,0.28);
    }

    .gallery-card img {
      height: 240px;
      width: 100%;
      object-fit: cover;
    }

    .card-body {
      text-align: center;
      font-weight: 600;
      color: #0b3c91;
    }

    .photo-time {
      font-size: 0.85rem;
      color: #555;
      font-weight: normal;
    }

    /* ================= BUTTONS ================= */
    .action-buttons {
      display: flex;
      justify-content: center;
      gap: 10px;
      margin-top: 10px;
    }

    .btn-outline-primary {
      --bs-btn-color: #0b3c91;
      --bs-btn-border-color: #0b3c91;
      --bs-btn-hover-bg: #0b3c91;
      --bs-btn-hover-border-color: #0b3c91;
    }

    .btn-outline-danger {
      --bs-btn-hover-bg: #dc3545;
    }

    .btn-outline-success {
      --bs-btn-hover-bg: #198754;
    }

    /* ================= ANIMATION ================= */
    .fade-in {
      animation: fadeInUp 0.6s ease both;
    }

    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(25px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
  </style>
</head>

<body>

<div class="container py-4">

  <!-- Navigation -->
  <div class="top-links mb-3">
    <a href="https://prakash-v181.github.io/ambedkar-bhavan-sangvi/">Home</a>
    <a href="https://prakash-v181.github.io/ambedkar-bhavan-sangvi/Ambedkar/JUscwHvYWBAY.in/index.html">
      Back to Ambedkar Bhavan Sangvi
    </a>
  </div>

  <h1 class="text-center mb-4">Ambedkar Bhavan Sangvi – Photo Gallery</h1>

  <!-- Upload -->
  <div class="upload-card mb-5">
    <div class="mb-3">
      <label class="form-label">Name</label>
      <input type="text" id="nameInput" class="form-control" placeholder="Enter name">
    </div>

    <div class="mb-3">
      <label class="form-label">Select Photo</label>
      <input type="file" id="imageUpload" class="form-control" accept="image/*">
    </div>

    <div class="d-grid">
      <button class="btn btn-primary" onclick="addPhoto()">Add Photo</button>
    </div>
  </div>

  <!-- Gallery -->
  <div class="row g-4" id="galleryGrid"></div>
</div>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

<script>
const nameInput = document.getElementById('nameInput');
const imageUpload = document.getElementById('imageUpload');
const galleryGrid = document.getElementById('galleryGrid');

let savedImages = JSON.parse(localStorage.getItem('galleryImages')) || [];

function formatDate(date) {
  return date.toLocaleString('en-GB', {
    day: '2-digit', month: 'short', year: 'numeric',
    hour: '2-digit', minute: '2-digit'
  });
}

function loadImages() {
  galleryGrid.innerHTML = '';

  savedImages.forEach((img, index) => {
    const col = document.createElement('div');
    col.className = 'col-md-4 fade-in';

    col.innerHTML = `
      <div class="gallery-card p-2">
        <img src="${img.src}">
        <div class="card-body">
          ${img.name}
          <div class="photo-time">${img.time}</div>

          <div class="action-buttons">
            <button class="btn btn-sm btn-outline-primary" onclick="editName(${index})">Edit</button>
            <button class="btn btn-sm btn-outline-danger" onclick="removeImage(${index})">Delete</button>
            <button class="btn btn-sm btn-outline-success" onclick="downloadImage('${img.src}')">Download</button>
          </div>
        </div>
      </div>
    `;
    galleryGrid.appendChild(col);
  });
}

loadImages();

function compressImage(file, callback) {
  const reader = new FileReader();
  reader.onload = e => {
    const img = new Image();
    img.onload = () => {
      const canvas = document.createElement('canvas');
      const maxWidth = 800;
      const scale = Math.min(maxWidth / img.width, 1);

      canvas.width = img.width * scale;
      canvas.height = img.height * scale;
      canvas.getContext('2d').drawImage(img, 0, 0, canvas.width, canvas.height);

      callback(canvas.toDataURL('image/jpeg', 0.7));
    };
    img.src = e.target.result;
  };
  reader.readAsDataURL(file);
}

function addPhoto() {
  const name = nameInput.value.trim();
  const file = imageUpload.files[0];

  if (!name) return alert('Please enter name');
  if (!file) return alert('Please select photo');

  compressImage(file, compressed => {
    savedImages.unshift({
      name: name,
      src: compressed,
      time: formatDate(new Date())
    });
    localStorage.setItem('galleryImages', JSON.stringify(savedImages));
    loadImages();
  });

  nameInput.value = '';
  imageUpload.value = '';
}

function editName(index) {
  const newName = prompt('Edit name:', savedImages[index].name);
  if (!newName) return;

  savedImages[index].name = newName;
  localStorage.setItem('galleryImages', JSON.stringify(savedImages));
  loadImages();
}

function removeImage(index) {
  if (!confirm('Are you sure you want to delete this photo?')) return;

  savedImages.splice(index, 1);
  localStorage.setItem('galleryImages', JSON.stringify(savedImages));
  loadImages();
}

function downloadImage(src) {
  const a = document.createElement('a');
  a.href = src;
  a.download = 'photo.jpg';
  a.click();
}
</script>

</body>
</html>
